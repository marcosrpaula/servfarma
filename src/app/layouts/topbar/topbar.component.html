<header id="page-topbar" data-scroll-header (window:scroll)="windowScroll()">
    <div class="layout-width">
        <div class="navbar-header">
            <div class="d-flex align-items-center">
                <!-- LOGO -->
                <div class="navbar-brand-box horizontal-logo">
                    <a href="javascript:void(0);" class="logo logo-dark">
                        <span class="logo-sm">
                            <img src="assets/images/logo-sm.png" alt="" height="22">
                        </span>
                        <span class="logo-lg">
                            <img src="assets/images/logo-dark.png" alt="" height="17">
                        </span>
                    </a>

                    <a href="javascript:void(0);" class="logo logo-light">
                        <span class="logo-sm">
                            <img src="assets/images/logo-sm.png" alt="" height="22">
                        </span>
                        <span class="logo-lg">
                            <img src="assets/images/logo-light.png" alt="">
                        </span>
                    </a>
                </div>

                <button type="button" class="btn btn-sm px-3 fs-16 header-item vertical-menu-btn topnav-hamburger" id="topnav-hamburger-icon" (click)="toggleMobileMenu($event)">
                    <span class="hamburger-icon">
                        <span></span>
                        <span></span>
                        <span></span>
                    </span>
                </button>
            </div>

            <div class="d-flex align-items-center ms-auto gap-1">
                <button type="button" class="btn btn-icon btn-topbar btn-ghost-secondary rounded-circle" (click)="fullscreen()" title="Tela cheia">
                    <i class="bx bx-fullscreen fs-22"></i>
                </button>

                <div class="dropdown topbar-user" ngbDropdown>
                    <button
                      type="button"
                      class="btn border-0 btn-ghost-secondary dropdown-toggle d-flex align-items-center"
                      id="page-header-user-dropdown"
                      ngbDropdownToggle
                    >
                        <span class="d-flex align-items-center">
                            <ng-container *ngIf="!showInitials; else initialsAvatar">
                                <img
                                  [src]="userAvatarUrl || defaultAvatarUrl"
                                  class="rounded-circle header-profile-user"
                                  [alt]="userName || 'Usuario'"
                                />
                            </ng-container>
                            <ng-template #initialsAvatar>
                                <span class="avatar-title rounded-circle header-profile-user bg-primary-subtle text-primary fw-semibold">
                                    {{ userInitial }}
                                </span>
                            </ng-template>
                            <span class="text-start ms-2 d-none d-xl-block">
                                <span class="d-block fw-medium text-body user-name-text">{{ userName || 'Usuario' }}</span>
                                <span class="d-block text-muted fs-12 user-name-sub-text">{{ userRoleLabel }}</span>
                            </span>
                        </span>
                    </button>
                    <div class="dropdown-menu dropdown-menu-end" ngbDropdownMenu aria-labelledby="page-header-user-dropdown">
                        <h6 class="dropdown-header">{{ userName || 'Usuario' }}</h6>
                        <div class="dropdown-divider"></div>
                        <button type="button" class="dropdown-item" (click)="logout()" ngbDropdownItem>
                            <i class="bx bx-log-out text-muted fs-18 align-middle me-2"></i>
                            Sair
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
